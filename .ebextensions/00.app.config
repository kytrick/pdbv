# https://docs.aws.amazon.com/elasticbeanstalk/latest/dg/customize-containers-ec2.html#linux-container-commands
#
# container commands are applied to your source code before it's deployed
# cool thing:  they have access to environment variables
# the numbers are becase commands are run in alphabetical order by name

packages:
  yum:
    git: []
commands:
  10.install_npm:
    command: yum -y --enablerepo=epel install npm
container_commands:
  00.setup_db:
    command: "./dump/prime_rds.sh"
    leader_only: true
  10.update_npm:
    command: npm install -g npm
  20.install_bower:
    #uses your package.json in which it finds bower
    command: npm install
  30.bower_install:
    command: bower --allow-root --config.analytics=false install